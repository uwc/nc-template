// ==== NAVIGATION ==== //

/**
 * 1. Headroom
 * 2. Upper navigation
 * 3. Lower navigation
 * 4. Turbolinks
 */


// 1. Headroom //

.site-navigation {
	position: absolute;
	left: 0;
	right: 0;
	top: 0;
	z-index: 9999;
	box-shadow: 0px 2px 8px -2px palette(gray, light);
	background-color: palette(white);

	.headroom & {
	  	position: fixed;
	  	transition: transform $anim-m;
	}

	.headroom--pinned &,
	.headroom--unpinned.headroom--bottom & {
	  	transform: translateY(0%);
	}

	.headroom--unpinned & {
	  	transform: translateY(-46%);
	}
}


// 2. Upper navigation //

.navigation-upper {
	@include ctnr(wide);
	@include clearfix();

	padding-top: vr(.7);
	position: relative;
	visibility: visible;
	transition: visibility $anim-m;

	.headroom--unpinned & {
	  	visibility: hidden;
	}

	.headroom--unpinned.headroom--bottom & {
		visibility: visible;
	}
}

.navigation-left,
.navigation-right {
	/* Lift the left & right elements above the center element. */
	position: relative;
	z-index: 10000;
}

.navigation-left {
	float: left;
}

.navigation-center {
	display: block;
	text-align: center;
	position: absolute;
	left: 0;
	right: 0;
	line-height: 0;

	svg,
	.custom-logo {
		opacity: 1;
		transition: opacity $anim-s;

		&:hover,
		&:focus {
			opacity: 0.75;
		}
	}

	svg {
		height: vr(1);
	}

	.custom-logo {
		max-width: 85vw;
		height: auto;
		vertical-align: middle;
	}
}

.navigation-right {
	float: right;
}

.navigation-search {
	color: palette(gray);
	background: none;
	outline: none;
	border: none;
	cursor: pointer;
	padding: 0;
	transition: transform $anim-s;

	svg {
		vertical-align: middle;
		fill: palette(gray);
		transition: $anim-s;

		&:hover,
		&:focus {
			fill: palette(orange);
		}
	}
}

.search-open {
	display: inline;
}

.search-close {
	display: none;
}


// 3. Lower navigation //

.navigation-lower {
	@include ctnr(wide);

	clear: both;
}

/* ----- */

/*.js .nav-collapse {
	clip: rect(0 0 0 0);
	max-height: 0;
	position: absolute;
	display: block;
	zoom: 1;
}

.nav-collapse.opened {
	max-height: 9999px;
}*/

.navigation-button {
	-webkit-tap-highlight-color: rgba(0,0,0,0);
	-webkit-touch-callout: none;
	user-select: none;
	display: none;
}

/*@media screen and (min-width: 40em) {
	.js .nav-collapse {
		position: relative;
	}
	.js .nav-collapse.closed {
		max-height: none;
	}
	.nav-toggle {
		display: none;
	}
}*/


// 4. Turbolinks //

.turbolinks-progress-bar {
	height: 4px;
	z-index: 999999;
	background-color: palette(blue);
	background-image: linear-gradient(left, palette(blue), palette(turquoise));
}

.turbolinks-bar {
	display: block;
	width: 100%;
	height: 4px;
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	z-index: 999999;

	/* Display full progress bar to indicate completed page load. */
	.-turbolinks-loaded & {
		background-color: palette(blue);
		background-image: linear-gradient(left, palette(blue), palette(turquoise));
	}
}
